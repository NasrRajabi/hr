
<style>
	/* Custom styles for the form and table */
	.form-container {
		background-color: #f8f9fa;
		padding: 20px;
		border-radius: 10px;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	}

	.form-title {
		font-size: 20px;
		font-weight: bold;
		margin-bottom: 20px;
	}

	.form-group {
		margin-bottom: 15px;
	}

	.form-floating label {
		color: #555;
	}

	.form-floating select {
		height: calc(2.25rem + 2px);
		padding: 0.375rem 0.75rem;
	}

	.text-right {
		direction: rtl;
	}

	.text-center {
		text-align: center;
	}
</style>

<div x-data="data()">
	<div class="d-flex justify-content-center">
		<div class="col-11">
			<div class="form-container">
				<div class="form-title text-center">Filter Form</div>
				
				<div class="text-right mt-3">
					<div class="row align-items-center mx-3 form-group">
						<div class="col">
							<div class="form-floating">
								<input type="text" class="form-control" id="employeeNumber" placeholder="رقم الموظف" x-model="filter.employeeNumber">
								<label for="employeeNumber">رقم الموظف</label>
							</div>
						</div>
						<div class="col">
							<div class="form-floating">
								<input type="text" class="form-control" id="employeeName" placeholder="اسم الموظف" x-model="filter.employeeName">
								<label for="employeeName">اسم الموظف</label>
							</div>
						</div>
						<div class="col">
							<div class="form-floating">
								<select class="form-select" id="generalManagement" aria-label="Floating label select example" x-model="filter.generalManagement">
									<option value="">الكل</option>
									<option value="1">One</option>
									<option value="2">Two</option>
									<option value="3">Three</option>
								</select>
								<label for="generalManagement">الادارة العامة</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="d-flex justify-content-center mt-4">
		<div class="col-11">
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th></th>
						<th @click="sortByColumn" class="cursor-pointer select-none">
							<i class="bi bi-arrow-down-up"></i>
							الاسم</th>
						<th @click="sortByColumn" class="cursor-pointer select-none text-center">
							<i class="bi bi-arrow-down-up"></i>
							الرقم الوظيفي</th>
						<th @click="sortByColumn" class="cursor-pointer select-none text-center">
							<i class="bi bi-arrow-down-up"></i>
							المحمول</th>
						<th @click="sortByColumn" class="cursor-pointer select-none text-center">
							<i class="bi bi-arrow-down-up"></i>
							البريد الالكتروني</th>
						<th @click="sortByColumn" class="cursor-pointer select-none text-center">
							<i class="bi bi-arrow-down-up"></i>
							التكليف
						</th>
						<th @click="sortByColumn" class="cursor-pointer select-none text-center">
							<i class="bi bi-arrow-down-up"></i>
							تاريخ مباشرة العمل
						</th>
						<th class="text-center">اجراءت</th>
					</tr>
				</thead>
				<tbody x-ref="tbody">
					{% for item in filteredData %}
						<tr>
							<td class="align-middle">
								<i class="bi bi-three-dots-vertical" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"></i>
								<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
									<a class="dropdown-item" href="/employee/profile/{{item.id}}">مشاهدة الملف</a>
									<a class="dropdown-item" href="#">تعديل</a>
								</div>
							</td>
							<td>
								<div class="d-flex flex-row float-end">
									<div class="ms-3">
										<img src="{{ item.avatar }}" alt="" width="55" class="rounded-circle">
									</div>
									<div class="p-2">
										<h6 class="mb-0 text-primary fw-bold">
											{{ item.f_name ~ ' ' ~ item.s_name ~ ' ' ~ item.t_name ~ ' ' ~ item.l_name }}
										</h6>
										<span class="small text-uppercase text-muted">{{ lookups.job_title[item.job_title] }}</span>
									</div>
								</div>
							</td>
							<td class="text-right align-middle text-center">{{ item.employee_no }}</td>
							<td class="text-right align-middle text-center">{{ item.g_mobile }}</td>
							<td class="text-right align-middle text-center">{{ item.g_email }}</td>
							<td class="text-right align-middle text-center"></td>
							<td class="text-right align-middle text-center">{{ item.job_start_date }}</td>
							<td class="text-center">
								<button x-on:click="($event.target, row)" type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=" تغيير اتفاقية الدوام">
									<i class="bi bi-calendar3 fs-5"></i>
								</button>
								<button x-on:click="($event.target, row)" type="button" class="btn btn-outline-danger btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="إلغاء تكليف">
									<i class="bi bi-clipboard-x fs-5"></i>
								</button>
								<button x-on:click="($event.target, row)" type="button" class="btn btn-outline-success btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="اضافة تكليف ">
									<i class="bi bi-person-workspace fs-5"></i>
								</button>
							</td>

								<button x-on:click="($event.target, row)" type="button" class="btn btn-outline-info btn-sm" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="تغيير حالة الموظف ">
									<i class="bi bi-person-gear fs-5"></i>
								</button>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>

<script>
	function data() {
		return {
			filter: {
				employeeNumber: '',
				employeeName: '',
				generalManagement: ''
			},
			filteredData: [],
			sortColumn: '',
			sortDirection: 1,
			sortByColumn(event) {
				const column = event.target.innerText;
				if (column === this.sortColumn) {
					this.sortDirection *= -1;
				} else {
					this.sortColumn = column;
					this.sortDirection = 1;
				}
				this.sortData();
			},
			sortData() {
				if (this.sortColumn) {
					this.filteredData.sort((a, b) => {
						if (a[this.sortColumn] < b[this.sortColumn]) {
							return -1 * this.sortDirection;
						}
						if (a[this.sortColumn] > b[this.sortColumn]) {
							return 1 * this.sortDirection;
						}
						return 0;
					});
				}
			},
			row(event, row) {
				// Handle row button click events here
			},
		};
	}
</script>
